04.データリンク層の規格
===

## 概要

- メタルケーブルに電流を流してデータを送受する方式では、ある一瞬においてケーブル上には１つのデータしか存在できない。
- これを回避するために様々な手法が存在する。
  - データリンク層の代表的な規格と、その規格で使われている伝送制御方式について学んでいく。

---

## イーサネット

### 概要

- イーサネットはIEEE802.3として標準化されているが、非常に普及した規格で現在も技術革新が続いている。
- 当初設計された10BASE5のようなイーサネットと現在の100BASE-Tといった規格では、同じ名前がついていても利用されている技術が異なる。
- 100BASE-TXや100BASE-TXなどの新しい規格では送信と受信で別々のより対線を使用するため、実際にはケーブル上でコリジョンは発生しなくなっている。
  - ハブにおけるコリジョンは発生するため、ハブはジャム信号を接続されている各ノードに送信する。
- 光ファイを使用する1000BASE-Xは、既存のイーサネット機器と互換性がなく、10GbpsイーサではCSMA/CD方式が放棄されている。
- 以上のようにイーサネットは歴史も古く発展の経緯も複雑だが、同じMACフレームフォーマットを利用することで、相互接続性を維持している。

### フレーム構成

- イーサネットでは、IEEE802.3によって伝送フレームの構成が定められている。
- 実際の運用では、FCSの後に12オクテットのIFGが挿入される。
- IFGが挿入されることで、他のノードが通信しやすくなる。

#### イーサネットフレームの仕様

|フレーム項目                |説明                                                                                   |
|:--------------------------:|:-------------------------------------------------------------------------------------:|
|`PRE`                       |同期をとるために使われる同期信号。                                                     |
|(プリアンブル)              |1と0が交互に7オクテット送信される。                                                    |
|`SFD`                       |フレームの先頭であることを表す1ビット列。                                              |
|(フレーム開始デリミタ)      |`10101011`を挿入する。                                                                 |
|`DA`                        |宛先アドレスをMACアドレスで記入する。                                                  |
|(宛先アドレス)              |(宛先アドレス)                                                                         |
|`SA`                        |送信先アドレスをMACアドレスで記入する。                                                |
|(送信先アドレス)            |                                                                                       |
|`LEN/TYPE`                  |イーサネットでは後続のデータ部分(可変長)の長さを挿入する。                             |
|(長さ or タイプ)            |                                                                                       |
|`DATA`                      |送信スべきデータを挿入するベイロード部分。                                             |
|(データ)                    |この部分の最大長が1500オクテットなので、イーサネットにおけるMTUが1500オクテットになる。|
|`PAD`                       |最小オクテットは64オクテットだが、これに満たない場合ここで穴埋め                       |
|(パディング)                |                                                                                       |
|`FCS`                       |CRCチェックを行い、伝送エラーにおけるビット誤りを検出するためのフィールド              |
|(フレームチェックシーケンス)|対象は、`DA`, `SA`, `LEN/TYPE`, `DATA`, `PAD`                                          |

### POE(Power over Ethernet)

- 機器への給電を、電力線ではなくイーサネットで行う技術。
- ケーブルの集約は世界的な潮流で、ネットワークの敷設や運用を楽にしたり柔軟にする効果がある。
  - データセンタなどでは、配線の省スペース効果も見込め。電源から離れた機器にも機器を配置しやすくなる。
- 情報処理技術者試験対策として覚えたいのは*802.3af*規格である。
  - 給電能力は１つのポートに対し15.4Wと決して大きくはないが、通信機器であればそれで十分なものも多く、実用に耐えうる能力である。
- 伝送路と電力路が同じものと、伝送路と電力路が異なるものがある。
  - 100Mイーサではケーブル内にある4対の芯線のうち2対しか通信に使っていないので、給電に同じ2対を使うパターンと、空いている2対を使用するパターンがある。
- 給電管理は、給電側機器(PSE: Power Soucing Equipment)が行う。
  - 具体的には、PSEケーブルを接続するとPoE対応機器かがチェックされ対応機器には給電が開始される。
  - 給電に使用するイーサネットケーブルは、カテゴリ3以上である必要がある。
- 後続機器で、カテゴリ5e以上のイーサネットケーブルを使い1ポートあたり30Wの給電能力を`802.3at`も出題された。
- IEEE 802.atは`POE+`とも呼ばれる。

### CSMA/CD


---

## トークンリング

---

## その他の伝送制御方式
