06.回線制御装置
===

## 回線制御装置の種類

- アナログ回線に対して接続/制御を行う回線制御装置を*モデム*という。
- RS-232Cインターフェースを用いてパソコンなどの端末と接続し、ディジタルデータをアナログ変換して伝送路に送信する。
- モデムは、V.24に定められた制御手順で回線制御を行う。

### 端末-モデム間インターフェース

- 端末とモデム間のインターフェースは`RS-232C`,`V.24`,`V.28`,`ISO2110`として定められている。
  - RS-232C = V.24 + V.28 + ISO2110

|インターフェース名|規定する内容                     |
|:----------------:|:-------------------------------:|
|`RS-232C`         |すべての条件を網羅した規約       |
|`V.24`            |論理条件に関する規定             |
|`V.28`            |電気的条件に関する規定           |
|`ISO2110`         |物理条件に関する規定             |

### データ伝送の手順

#### アナログ回線でのデータ伝送手順

1. DTEはDCEに対して、ER-ONを送信し、データ端末レディを通知する。
2. DCEはDTEに対して、DR-ONを送信し、データセットレディを通知する。
3. DTEはDCEに対して、RS-ONを送信し、DCEを送信モードにセットする。
4. DCEは搬送波を送信し、伝送状態を作る。また、DTEにCS-ONを送信し、送信可能を通知する。
5. 受信側のDCEは送信側DCEの搬送波を検出し、受信可能になると、CD-ONを通知する。
6. DTEはSD回路から送信を、RD回路から受信を行う。
7. データ伝送が終了すると、DTEはDCEに対してRS-OFFを送信し、DCEの送信モードを解除する。
8. DCEは搬送波送信を終了し、CS-OFFによってDTEに通知する。
9. DCEは通信相手のDCE搬送波を検出しなくなると、CS-OFFをDTEに通知する。
10. DTEはER-OFFを通知して接続回路を遮断する。
11. DCEはDR-OFFを通知して待機状態に入る。

#### DTE-DCE接続

- DTEとDCEの間を結ぶにはストレートケーブルを用いる。

#### DCE-DCE接続

- 接続要件などの関連で機内モデムと専用線モデムを組み合わせる場合は、DCE-DCE接続になるため注意が必要。
- この場合、DCE-DCE接続を通常のDTE-DCE接続のように扱うためには、クロスケーブルで結線する必要がある。
- クロスケーブルで結線した場合は、クロックの同期に注意する必要がある。
- クロックは通常ST2によってDCEからDTEに送られるが、DCE-DCE接続では互いがクロック供給を行うモデムであるため、ST1で統一する。

#### Auto MDI/MDI-X

- イーサネットの通信機器にはDTEのようなMDIタイプのポートと、DCEのようなMDI-X(送信と受信が入れ替わった)ポートがある。
- 異種ポートの接続にはストレートケーブルを、同種のポートの接続にはクロスケーブルを使用するが、ポートの判別や使い分けを自動で判別し、設定する`Auto MDI/MDI-X`が存在する。
  - 現在ではほとんどの機器が備えている。
