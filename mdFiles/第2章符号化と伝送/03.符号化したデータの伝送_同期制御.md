符号化したデータの伝送①同期制御
===

## 同期

- 通信を行う場合は、送信側と受信側でタイミングを合わせる必要がある。
  - これを*同期*と呼ぶ。
- 同期が取れていない状況で通信を行うと互いに認識しているデータが異なるものになる可能性がある。
- 同期のとり方は*ビット同期*と*ブロック同期*の二種類に大別できる。

### ビット同期

- 1ビットのデータを正確に認識するための方法で、伝送される波形のどの部分が1ビットに対応するのかを規定する。
- 送信側と受信側でビット位置を正しく認識するためにタイミングクロックを使うため、*クロック同期方式*とも呼ばれる。

#### 同期方式

- 同期方式は、データ信号の中に、同期タイミングをとるための信号を混在させる方法である。
- 受信側は同期タイミングデータから、波形のどの部分をデータとして抽出できればよいか判断する。
- データの形によっては、同期タイミングを分離しにくいこともあり、その場合は、同期タイミング用の信号線をデータ信号線と別に用意する手法もあるがあまり利用されていない。

##### 調歩同期方式

- 非同期方式とも呼ばれる通信方式で、7ビットか8ビットの固定長ブロックの前後にスタートビットとストップビットを付加して送信する方式。
- 1文字ごとに2ビットの情報を付加しなければならないのでオーバーヘッドが大きく大容量のデータ伝送には不向き。
- 調歩同期方式で通信する場合は、以下の設定を送受信側で合わせる必要がある。
  - データブロックのサイズ(7bit or 8bit)
	- パリティの有無
	- 伝送速度
- 受信側は、スタートビットを検出した後は、伝送速度に従ってビット同期をとっていく。
- したがって、送信側と受信側のタイマ精度にずれがあると同期が取れない可能性がある。

---

# ブロック同期

- ビット同期が確立できたビット列を、データとして意味のあるブロックとして認識するための同期
- *キャラクタ同期*と*フラグ同期*がある。

## キャラクタ同期方式

- 送信側が送信データの最初に*SYNコード*と呼ばれる同期をとるための特別なコードを連続して送信する方式。
- 同期方法が簡単で、ほとんどの通信機器が対応している。
- SYNコードは、`00010110`からなる8bitのビット列である。
- 受信側は、SYNコードを認識してから、データの受信を開始する。
- どのビットから受信を始めたとしても、最悪のケースでも8回目にはSYNコードを正しく認識して同期をとることができる。
- 8bitで構成されるテキストデータを送信するのに便利。

### キャラクタ同期方式の欠点

- SYNコードのパターンはデータとして送信できない。
- 8bit長のデータしか送信できない。
  - 16bitで構成される日本語や可変長のマルチメディアデータの送信は不可能。

## フラグ同期方式

- 送信したいデータの前後にフラグと呼ばれる特別なビット列を挿入して同期をとる。
- フラグに同じパターンが出てこなければよいので 、送信するデータは何ビット単位の固まりであってもかまわない。
- データの中にフラグと同じパターンが出てしまうと、フラグとして認識してしまうため、*セロインセーション*とよばれる処理を行う。
  - フラグ同期方式では、`011111110`というパターンをフラグとして使用するので、データの中に1が5津連続した場合は強制的に0を挿入する。
	- 受信側では、データ中で1が5津連続したら次に続く0を強制的に取り除く、この処理により、フラグの固有性を確保する。


